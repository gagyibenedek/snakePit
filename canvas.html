<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
 
<script>
var canvas;
var ctx;

var xPos;
var yPos;

var xTar;
var yTar;

var timer;

var direction;


function doKeyDown(e) {

 if(e.keyCode == 97 || e.keyCode == 119 || e.keyCode == 100 || e.keyCode == 115){ // a || s || d || w
	direction = e.keyCode;
	console.log("DIR CHANGED TO:" + direction);
} 

}

function init() {
  canvas = document.getElementById('canvas');
  if (canvas.getContext) {
    ctx = canvas.getContext("2d");    
  }
  
  window.addEventListener( "keypress", doKeyDown, false );
  
  xPos = 150;
  yPos = 150;
  
  	xTar = xPos;
	yTar = yPos;
	
	direction = 97;
}

function draw() {
	console.log(direction);

	if(direction == 97){ // a
	xTar -= 5;
	} else  if(direction == 119){ // w
	yTar -= 5;
	} else if(direction == 100){ // d
	xTar += 5;
	} else  if(direction == 115){ // s
	yTar += 5; 
	}

	ctx.beginPath();
	ctx.moveTo(xPos,yPos);
	ctx.lineTo(xTar,yTar);
	ctx.lineWidth = 5;
	ctx.closePath();
	ctx.stroke();
	
	  xPos = xTar;
  yPos = yTar;
}

function start() {
  timer = window.setInterval(function () {draw()},100);
}

function stop() {
  window.clearInterval(timer);
  canvas.width = canvas.width;
  xPos = 150;
  yPos = 150;
  
  	xTar = xPos;
	yTar = yPos;
	
	direction = 97;
}
</script>
 
</head>
<body onload="init();" style="background-color:black">
  <canvas id="canvas" width="300" height="300" style="background-color:white"></canvas>
  <br />
  
  <button  onclick="start()"  >Start</button> 
  <button  onclick="stop()"  >Stop</button> 
</body>
</html>